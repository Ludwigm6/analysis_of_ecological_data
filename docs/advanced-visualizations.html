<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>15 Advanced Visualizations | Analysis of Ecological Data with R</title>
  <meta name="description" content="This is currently a slide collection for the ILOEK Course “Analysis of ecological data in R” but could eventually turn into a more comprehensive ressource collection." />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content="15 Advanced Visualizations | Analysis of Ecological Data with R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is currently a slide collection for the ILOEK Course “Analysis of ecological data in R” but could eventually turn into a more comprehensive ressource collection." />
  <meta name="github-repo" content="Ludwigm6/analysis_of_ecological_data" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="15 Advanced Visualizations | Analysis of Ecological Data with R" />
  
  <meta name="twitter:description" content="This is currently a slide collection for the ILOEK Course “Analysis of ecological data in R” but could eventually turn into a more comprehensive ressource collection." />
  

<meta name="author" content="Marvin Ludwig" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="urban-trees.html"/>
<link rel="next" href="additional-ressources.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.1.1/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.1.1/leaflet-providers-plugin.js"></script>
<link href="libs/HomeButton-0.0.1/home-button.css" rel="stylesheet" />
<script src="libs/HomeButton-0.0.1/home-button.js"></script>
<script src="libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet" />
<link href="libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Analysis of Ecological Data</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome</a></li>
<li class="chapter" data-level="2" data-path="ecological-data.html"><a href="ecological-data.html"><i class="fa fa-check"></i><b>2</b> Ecological data</a></li>
<li class="chapter" data-level="3" data-path="what-is-r.html"><a href="what-is-r.html"><i class="fa fa-check"></i><b>3</b> What is R?</a></li>
<li class="chapter" data-level="4" data-path="the-aasee-dataset.html"><a href="the-aasee-dataset.html"><i class="fa fa-check"></i><b>4</b> The Aasee Dataset</a></li>
<li class="chapter" data-level="5" data-path="r-foundations.html"><a href="r-foundations.html"><i class="fa fa-check"></i><b>5</b> R foundations</a></li>
<li class="chapter" data-level="6" data-path="dataframes.html"><a href="dataframes.html"><i class="fa fa-check"></i><b>6</b> Dataframes</a></li>
<li class="chapter" data-level="7" data-path="project-setup.html"><a href="project-setup.html"><i class="fa fa-check"></i><b>7</b> Project Setup</a></li>
<li class="chapter" data-level="8" data-path="string-handling.html"><a href="string-handling.html"><i class="fa fa-check"></i><b>8</b> String handling</a></li>
<li class="chapter" data-level="9" data-path="casestudy-aasee-fish-mortality.html"><a href="casestudy-aasee-fish-mortality.html"><i class="fa fa-check"></i><b>9</b> Casestudy: Aasee fish mortality</a></li>
<li class="chapter" data-level="10" data-path="tidyverse-functions.html"><a href="tidyverse-functions.html"><i class="fa fa-check"></i><b>10</b> Tidyverse functions</a></li>
<li class="chapter" data-level="11" data-path="simple-visualizations.html"><a href="simple-visualizations.html"><i class="fa fa-check"></i><b>11</b> Simple Visualizations</a></li>
<li class="chapter" data-level="12" data-path="linear-models.html"><a href="linear-models.html"><i class="fa fa-check"></i><b>12</b> Linear Models</a></li>
<li class="chapter" data-level="13" data-path="species-data.html"><a href="species-data.html"><i class="fa fa-check"></i><b>13</b> Species data</a></li>
<li class="chapter" data-level="14" data-path="urban-trees.html"><a href="urban-trees.html"><i class="fa fa-check"></i><b>14</b> Urban Trees</a></li>
<li class="chapter" data-level="15" data-path="advanced-visualizations.html"><a href="advanced-visualizations.html"><i class="fa fa-check"></i><b>15</b> Advanced Visualizations</a></li>
<li class="chapter" data-level="16" data-path="additional-ressources.html"><a href="additional-ressources.html"><i class="fa fa-check"></i><b>16</b> Additional Ressources</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Made with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Analysis of Ecological Data with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="advanced-visualizations" class="section level1 hasAnchor" number="15">
<h1><span class="header-section-number">15</span> Advanced Visualizations<a href="advanced-visualizations.html#advanced-visualizations" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<blockquote>
<p>Es gibt nur eine Breitbandleitung ins Hirn und das sind die Augen. <a href="https://www.youtube.com/watch?v=QqVFEP3_BtY">David Krisel</a></p>
</blockquote>
<p>In the course, we used three datasets. All of them have different features and difficulties that we need to keep in mind when we want to visualize parts of the data to point out some interesting facts!</p>
<p>The <strong>Aasee Water Monitoring</strong> data has a temporal component and “continuous” measurements. The <strong>arthoropode species on crop fields</strong> follow the classic plot based design and allows for comparisons between different groups. The <strong>trees and districts of Muenster</strong> potentially have a spatial component to it but also allow for comparisons of the different species and districts.</p>
<div id="the-grammar-of-graphics" class="section level2 hasAnchor" number="15.1">
<h2><span class="header-section-number">15.1</span> The grammar of graphics<a href="advanced-visualizations.html#the-grammar-of-graphics" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Scientific figures and advanced visualization in R are usually done with the <code>ggplot2</code> package.</p>
<ul>
<li><a href="https://ggplot2.tidyverse.org/">https://ggplot2.tidyverse.org/</a></li>
<li>tidyverse package: synergies and integration with e.g. dplyr</li>
<li>layer based language that are combined with <code>+</code></li>
<li>differentiated by “static” and “dynamic” parameters</li>
<li>many extensions: <a href="https://exts.ggplot2.tidyverse.org/gallery/">https://exts.ggplot2.tidyverse.org/gallery/</a></li>
<li>Gallery for inspiration: <a href="https://r-graph-gallery.com/index.html">https://r-graph-gallery.com/index.html</a></li>
</ul>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="advanced-visualizations.html#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb201-2"><a href="advanced-visualizations.html#cb201-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)</span>
<span id="cb201-3"><a href="advanced-visualizations.html#cb201-3" aria-hidden="true" tabindex="-1"></a><span class="co"># data overview</span></span>
<span id="cb201-4"><a href="advanced-visualizations.html#cb201-4" aria-hidden="true" tabindex="-1"></a>species <span class="ot">=</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/crop_species.csv&quot;</span>)</span></code></pre></div>
<div id="initialze-the-plot" class="section level3 hasAnchor" number="15.1.1">
<h3><span class="header-section-number">15.1.1</span> Initialze the plot<a href="advanced-visualizations.html#initialze-the-plot" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Tell ggplot which <code>data.frame</code> is the basis for the plot.</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="advanced-visualizations.html#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> species)</span></code></pre></div>
<p><img src="ecoanalysis_files/figure-html/unnamed-chunk-78-1.png" width="672" /></p>
<p>The <code>mapping</code> argument of the <code>ggplot()</code> function handles which columns of the data should be used for which purpose.
To specify this, we use the <code>aes()</code> function (aesthetics). Common things that we specify:</p>
<ul>
<li>x</li>
<li>y</li>
<li>group</li>
<li>color</li>
<li>fill</li>
</ul>
<p>Here we specify that on the x-axis in our plot represent the <code>AraInd</code> column. As a result we get the proper y-axis, but still no data is shown. For this, we have to specify in which form the data should be depicted.</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="advanced-visualizations.html#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> species, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> AraInd))</span></code></pre></div>
<p><img src="ecoanalysis_files/figure-html/unnamed-chunk-79-1.png" width="672" /></p>
</div>
<div id="geometry-types" class="section level3 hasAnchor" number="15.1.2">
<h3><span class="header-section-number">15.1.2</span> Geometry types<a href="advanced-visualizations.html#geometry-types" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are many different geometry types build into <code>ggplot2</code> and even more from additional packages. The functions to create the geometry layers usually start with <code>geom_</code>. The geom functions also have their own arguments you can specify.</p>
<ul>
<li>geom_point</li>
<li>geom_line</li>
<li>geom_boxplot</li>
<li>geom_histogram</li>
<li>…</li>
</ul>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="advanced-visualizations.html#cb204-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(species, <span class="fu">aes</span>(<span class="at">x =</span> AraInd))<span class="sc">+</span></span>
<span id="cb204-2"><a href="advanced-visualizations.html#cb204-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>()</span></code></pre></div>
<p><img src="ecoanalysis_files/figure-html/unnamed-chunk-80-1.png" width="672" /></p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="advanced-visualizations.html#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(species, <span class="fu">aes</span>(<span class="at">x =</span> AraInd))<span class="sc">+</span></span>
<span id="cb205-2"><a href="advanced-visualizations.html#cb205-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">10</span>, <span class="at">fill =</span> <span class="st">&quot;darkgreen&quot;</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>)</span></code></pre></div>
<p><img src="ecoanalysis_files/figure-html/unnamed-chunk-81-1.png" width="672" /></p>
<p>Different geometry types require more than one aesthetic. E.g. <code>geom_point</code> needs the x and y aesthetics.</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="advanced-visualizations.html#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(species, <span class="fu">aes</span>(<span class="at">x =</span> Croptype, <span class="at">y =</span> AraInd))<span class="sc">+</span></span>
<span id="cb206-2"><a href="advanced-visualizations.html#cb206-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="ecoanalysis_files/figure-html/unnamed-chunk-82-1.png" width="672" /></p>
</div>
<div id="axis-formats" class="section level3 hasAnchor" number="15.1.3">
<h3><span class="header-section-number">15.1.3</span> Axis Formats<a href="advanced-visualizations.html#axis-formats" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The Axis format depends on the type of variable you want to plot. We have to be aware of what scale type we have.</p>
<ul>
<li>discrete scale for categorical data</li>
<li>continuous scale for numeric data</li>
<li>limits, ticks, labels …</li>
</ul>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="advanced-visualizations.html#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(species, <span class="fu">aes</span>(<span class="at">x =</span> Croptype, <span class="at">y =</span> AraInd))<span class="sc">+</span></span>
<span id="cb207-2"><a href="advanced-visualizations.html#cb207-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>, <span class="at">shape =</span> <span class="dv">18</span>)<span class="sc">+</span></span>
<span id="cb207-3"><a href="advanced-visualizations.html#cb207-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_discrete</span>(<span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;KE&quot;</span> <span class="ot">=</span> <span class="st">&quot;Grain Pea&quot;</span>,</span>
<span id="cb207-4"><a href="advanced-visualizations.html#cb207-4" aria-hidden="true" tabindex="-1"></a>                                <span class="st">&quot;SM&quot;</span> <span class="ot">=</span> <span class="st">&quot;Silage Maize&quot;</span>,</span>
<span id="cb207-5"><a href="advanced-visualizations.html#cb207-5" aria-hidden="true" tabindex="-1"></a>                                <span class="st">&quot;WR&quot;</span> <span class="ot">=</span> <span class="st">&quot;Winter Oilseed Rape&quot;</span>,</span>
<span id="cb207-6"><a href="advanced-visualizations.html#cb207-6" aria-hidden="true" tabindex="-1"></a>                                <span class="st">&quot;WW&quot;</span> <span class="ot">=</span> <span class="st">&quot;Winter Wheat&quot;</span>,</span>
<span id="cb207-7"><a href="advanced-visualizations.html#cb207-7" aria-hidden="true" tabindex="-1"></a>                                <span class="st">&quot;ZR&quot;</span> <span class="ot">=</span> <span class="st">&quot;Sugar Beet&quot;</span>))<span class="sc">+</span></span>
<span id="cb207-8"><a href="advanced-visualizations.html#cb207-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">&quot;Aranae [n]&quot;</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">200</span>))</span></code></pre></div>
<p><img src="ecoanalysis_files/figure-html/unnamed-chunk-83-1.png" width="672" /></p>
<p>We can also save the plot to a object to reuse and modify it later.</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="advanced-visualizations.html#cb208-1" aria-hidden="true" tabindex="-1"></a>araind_plot <span class="ot">=</span> <span class="fu">ggplot</span>(species, <span class="fu">aes</span>(<span class="at">x =</span> Croptype, <span class="at">y =</span> AraInd))<span class="sc">+</span></span>
<span id="cb208-2"><a href="advanced-visualizations.html#cb208-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>, <span class="at">shape =</span> <span class="dv">18</span>)<span class="sc">+</span></span>
<span id="cb208-3"><a href="advanced-visualizations.html#cb208-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_discrete</span>(<span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;KE&quot;</span> <span class="ot">=</span> <span class="st">&quot;Grain Pea&quot;</span>,</span>
<span id="cb208-4"><a href="advanced-visualizations.html#cb208-4" aria-hidden="true" tabindex="-1"></a>                                <span class="st">&quot;SM&quot;</span> <span class="ot">=</span> <span class="st">&quot;Silage Maize&quot;</span>,</span>
<span id="cb208-5"><a href="advanced-visualizations.html#cb208-5" aria-hidden="true" tabindex="-1"></a>                                <span class="st">&quot;WR&quot;</span> <span class="ot">=</span> <span class="st">&quot;Winter Oilseed Rape&quot;</span>,</span>
<span id="cb208-6"><a href="advanced-visualizations.html#cb208-6" aria-hidden="true" tabindex="-1"></a>                                <span class="st">&quot;WW&quot;</span> <span class="ot">=</span> <span class="st">&quot;Winter Wheat&quot;</span>,</span>
<span id="cb208-7"><a href="advanced-visualizations.html#cb208-7" aria-hidden="true" tabindex="-1"></a>                                <span class="st">&quot;ZR&quot;</span> <span class="ot">=</span> <span class="st">&quot;Sugar Beet&quot;</span>))<span class="sc">+</span></span>
<span id="cb208-8"><a href="advanced-visualizations.html#cb208-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">&quot;Aranae [n]&quot;</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">200</span>))</span>
<span id="cb208-9"><a href="advanced-visualizations.html#cb208-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb208-10"><a href="advanced-visualizations.html#cb208-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb208-11"><a href="advanced-visualizations.html#cb208-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb208-12"><a href="advanced-visualizations.html#cb208-12" aria-hidden="true" tabindex="-1"></a>araind_plot <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">&quot;Aranae [n] per crop type&quot;</span>)</span></code></pre></div>
<p><img src="ecoanalysis_files/figure-html/unnamed-chunk-84-1.png" width="672" /></p>
</div>
<div id="color-scales" class="section level3 hasAnchor" number="15.1.4">
<h3><span class="header-section-number">15.1.4</span> Color Scales<a href="advanced-visualizations.html#color-scales" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>With the <code>color</code> and <code>fill</code> arguments in <code>aes()</code> we specify which columns of the data.frame should be represented as a color scale in the plot.</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="advanced-visualizations.html#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(species, <span class="fu">aes</span>(<span class="at">x =</span> Croptype, <span class="at">y =</span> AraInd, <span class="at">color =</span> AraSpec))<span class="sc">+</span></span>
<span id="cb209-2"><a href="advanced-visualizations.html#cb209-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>, <span class="at">shape =</span> <span class="dv">18</span>)<span class="sc">+</span></span>
<span id="cb209-3"><a href="advanced-visualizations.html#cb209-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_discrete</span>(<span class="at">name =</span> <span class="st">&quot;Crop Type&quot;</span>)<span class="sc">+</span></span>
<span id="cb209-4"><a href="advanced-visualizations.html#cb209-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">&quot;Aranae [n]&quot;</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">200</span>))</span></code></pre></div>
<p><img src="ecoanalysis_files/figure-html/unnamed-chunk-85-1.png" width="672" /></p>
<p>We can specify the colors by adding a <code>scale_color_</code> layer. Just like with the axis, there are discrete and continuous color scales available!</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="advanced-visualizations.html#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(species, <span class="fu">aes</span>(<span class="at">x =</span> Croptype, <span class="at">y =</span> AraInd, <span class="at">color =</span> AraSpec))<span class="sc">+</span></span>
<span id="cb210-2"><a href="advanced-visualizations.html#cb210-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>, <span class="at">shape =</span> <span class="dv">18</span>)<span class="sc">+</span></span>
<span id="cb210-3"><a href="advanced-visualizations.html#cb210-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_gradient</span>(<span class="at">name =</span> <span class="st">&quot;Aranae</span><span class="sc">\n</span><span class="st">Species [n]&quot;</span>, <span class="at">low =</span> <span class="st">&quot;yellow&quot;</span>, <span class="at">high =</span> <span class="st">&quot;red&quot;</span>)<span class="sc">+</span></span>
<span id="cb210-4"><a href="advanced-visualizations.html#cb210-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_discrete</span>(<span class="at">name =</span> <span class="st">&quot;Crop Type&quot;</span>)<span class="sc">+</span></span>
<span id="cb210-5"><a href="advanced-visualizations.html#cb210-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">&quot;Aranae [n]&quot;</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">200</span>))</span></code></pre></div>
<p><img src="ecoanalysis_files/figure-html/unnamed-chunk-86-1.png" width="672" /></p>
</div>
<div id="themes" class="section level3 hasAnchor" number="15.1.5">
<h3><span class="header-section-number">15.1.5</span> Themes<a href="advanced-visualizations.html#themes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are many prebuild themes…</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="advanced-visualizations.html#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(species, <span class="fu">aes</span>(<span class="at">x =</span> Croptype, <span class="at">y =</span> AraInd, <span class="at">color =</span> AraSpec))<span class="sc">+</span></span>
<span id="cb211-2"><a href="advanced-visualizations.html#cb211-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>, <span class="at">shape =</span> <span class="dv">18</span>)<span class="sc">+</span></span>
<span id="cb211-3"><a href="advanced-visualizations.html#cb211-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_gradientn</span>(<span class="at">name =</span> <span class="st">&quot;Aranae</span><span class="sc">\n</span><span class="st">Species [n]&quot;</span>,<span class="at">colors =</span> <span class="fu">mako</span>(<span class="dv">50</span>))<span class="sc">+</span></span>
<span id="cb211-4"><a href="advanced-visualizations.html#cb211-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_discrete</span>(<span class="at">name =</span> <span class="st">&quot;Crop Type&quot;</span>)<span class="sc">+</span></span>
<span id="cb211-5"><a href="advanced-visualizations.html#cb211-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">&quot;Aranae [n]&quot;</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">200</span>))<span class="sc">+</span></span>
<span id="cb211-6"><a href="advanced-visualizations.html#cb211-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="ecoanalysis_files/figure-html/unnamed-chunk-87-1.png" width="672" /></p>
<p>… or you can specify your own:</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="advanced-visualizations.html#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(species, <span class="fu">aes</span>(<span class="at">x =</span> Croptype, <span class="at">y =</span> AraInd, <span class="at">color =</span> AraSpec))<span class="sc">+</span></span>
<span id="cb212-2"><a href="advanced-visualizations.html#cb212-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>, <span class="at">shape =</span> <span class="dv">18</span>)<span class="sc">+</span></span>
<span id="cb212-3"><a href="advanced-visualizations.html#cb212-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_gradientn</span>(<span class="at">name =</span> <span class="st">&quot;Aranae</span><span class="sc">\n</span><span class="st">Species [n]&quot;</span>,<span class="at">colors =</span> <span class="fu">mako</span>(<span class="dv">50</span>))<span class="sc">+</span></span>
<span id="cb212-4"><a href="advanced-visualizations.html#cb212-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_discrete</span>(<span class="at">name =</span> <span class="st">&quot;Crop Type&quot;</span>)<span class="sc">+</span></span>
<span id="cb212-5"><a href="advanced-visualizations.html#cb212-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">&quot;Aranae [n]&quot;</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">200</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>))<span class="sc">+</span></span>
<span id="cb212-6"><a href="advanced-visualizations.html#cb212-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb212-7"><a href="advanced-visualizations.html#cb212-7" aria-hidden="true" tabindex="-1"></a>          <span class="at">panel.grid.major.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">linetype =</span> <span class="st">&quot;dotted&quot;</span>),</span>
<span id="cb212-8"><a href="advanced-visualizations.html#cb212-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>))</span></code></pre></div>
<p><img src="ecoanalysis_files/figure-html/unnamed-chunk-88-1.png" width="672" /></p>
</div>
</div>
<div id="task-publication-ready-figures" class="section level2 hasAnchor" number="15.2">
<h2><span class="header-section-number">15.2</span> TASK: Publication ready figures<a href="advanced-visualizations.html#task-publication-ready-figures" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Create the following plots:</p>
<ol style="list-style-type: decimal">
<li>Boxplots of the Aranae Species per crop type.</li>
<li>Plot the Carabidae Individuums vs. the Carabidae Species and color the points based on the crop on the field.</li>
<li>Create a map of the trees in Münster (with ggplot only!).
<ol start="3" style="list-style-type: decimal">
<li>Create a “heatmap” of the trees in Münster (<code>geom_bin_2d</code> or <code>geom_hex</code>)</li>
</ol></li>
<li>A bar plot (<code>geom_col</code>) of the Top 10 districts of Münster with the most trees.</li>
<li>A time series of the oxygen content in the Aasee with
Hint: Use <code>lubridate::ymd_hm()</code> to convert the date into a useful format.
3.1 a horizontal line indicating critical oxygen concentrations of 4 mg/l
3.2 color the line based on the temperature values. Use an appropriate color scale.</li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="urban-trees.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="additional-ressources.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/14-ggplot.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["ecoanalysis.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
