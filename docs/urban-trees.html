<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>14 Urban Trees | Analysis of Ecological Data with R</title>
  <meta name="description" content="This is currently a slide collection for the ILOEK Course “Analysis of ecological data in R” but could eventually turn into a more comprehensive ressource collection." />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content="14 Urban Trees | Analysis of Ecological Data with R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is currently a slide collection for the ILOEK Course “Analysis of ecological data in R” but could eventually turn into a more comprehensive ressource collection." />
  <meta name="github-repo" content="Ludwigm6/analysis_of_ecological_data" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="14 Urban Trees | Analysis of Ecological Data with R" />
  
  <meta name="twitter:description" content="This is currently a slide collection for the ILOEK Course “Analysis of ecological data in R” but could eventually turn into a more comprehensive ressource collection." />
  

<meta name="author" content="Marvin Ludwig" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="species-data.html"/>
<link rel="next" href="advanced-visualizations.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.1.1/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.1.1/leaflet-providers-plugin.js"></script>
<link href="libs/HomeButton-0.0.1/home-button.css" rel="stylesheet" />
<script src="libs/HomeButton-0.0.1/home-button.js"></script>
<script src="libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet" />
<link href="libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Analysis of Ecological Data</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome</a></li>
<li class="chapter" data-level="2" data-path="ecological-data.html"><a href="ecological-data.html"><i class="fa fa-check"></i><b>2</b> Ecological data</a></li>
<li class="chapter" data-level="3" data-path="what-is-r.html"><a href="what-is-r.html"><i class="fa fa-check"></i><b>3</b> What is R?</a></li>
<li class="chapter" data-level="4" data-path="the-aasee-dataset.html"><a href="the-aasee-dataset.html"><i class="fa fa-check"></i><b>4</b> The Aasee Dataset</a></li>
<li class="chapter" data-level="5" data-path="r-foundations.html"><a href="r-foundations.html"><i class="fa fa-check"></i><b>5</b> R foundations</a></li>
<li class="chapter" data-level="6" data-path="dataframes.html"><a href="dataframes.html"><i class="fa fa-check"></i><b>6</b> Dataframes</a></li>
<li class="chapter" data-level="7" data-path="project-setup.html"><a href="project-setup.html"><i class="fa fa-check"></i><b>7</b> Project Setup</a></li>
<li class="chapter" data-level="8" data-path="string-handling.html"><a href="string-handling.html"><i class="fa fa-check"></i><b>8</b> String handling</a></li>
<li class="chapter" data-level="9" data-path="casestudy-aasee-fish-mortality.html"><a href="casestudy-aasee-fish-mortality.html"><i class="fa fa-check"></i><b>9</b> Casestudy: Aasee fish mortality</a></li>
<li class="chapter" data-level="10" data-path="tidyverse-functions.html"><a href="tidyverse-functions.html"><i class="fa fa-check"></i><b>10</b> Tidyverse functions</a></li>
<li class="chapter" data-level="11" data-path="simple-visualizations.html"><a href="simple-visualizations.html"><i class="fa fa-check"></i><b>11</b> Simple Visualizations</a></li>
<li class="chapter" data-level="12" data-path="linear-models.html"><a href="linear-models.html"><i class="fa fa-check"></i><b>12</b> Linear Models</a></li>
<li class="chapter" data-level="13" data-path="species-data.html"><a href="species-data.html"><i class="fa fa-check"></i><b>13</b> Species data</a></li>
<li class="chapter" data-level="14" data-path="urban-trees.html"><a href="urban-trees.html"><i class="fa fa-check"></i><b>14</b> Urban Trees</a></li>
<li class="chapter" data-level="15" data-path="advanced-visualizations.html"><a href="advanced-visualizations.html"><i class="fa fa-check"></i><b>15</b> Advanced Visualizations</a></li>
<li class="chapter" data-level="16" data-path="additional-ressources.html"><a href="additional-ressources.html"><i class="fa fa-check"></i><b>16</b> Additional Ressources</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Made with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Analysis of Ecological Data with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="urban-trees" class="section level1 hasAnchor" number="14">
<h1><span class="header-section-number">14</span> Urban Trees<a href="urban-trees.html#urban-trees" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In the <a href="https://opendata.stadt-muenster.de/dataset/digitales-baumkataster-m%C3%BCnster">open data portal Münster</a> you can find the location and species group of all the trees that are managed by the city. From there, one can also find the district borders. To put into practice what we have learned for far, below are some tasks using both tree and district information.
<strong>You can download the two datasets from the learnweb (slightly modified for the course).</strong></p>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-65"></span>
<img src="ecoanalysis_files/figure-html/unnamed-chunk-65-1.png" alt="Tree positions in Muenster" width="672" />
<p class="caption">
Figure 14.1: Tree positions in Muenster
</p>
</div>
<div id="tasks-urban-tree-diversity" class="section level2 hasAnchor" number="14.1">
<h2><span class="header-section-number">14.1</span> Tasks: Urban Tree Diversity<a href="urban-trees.html#tasks-urban-tree-diversity" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li>Tree Abundances</li>
</ol>
<ul>
<li>Load the datasets <code>muenster_baume.csv</code> and <code>muenster_bezirke.csv</code>.</li>
<li>Which district has the most trees?</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Modelling</li>
</ol>
<ul>
<li>Compare the number of trees in a district with its area: Plot this relation.</li>
<li>Is a linear model applicable here?</li>
<li>Transform both variables into a logarithmic scale (<code>log()</code>). Plot the relation again and compare.</li>
<li>Model the relation between district area and number of trees. Is the model valid?</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>Tree species</li>
</ol>
<ul>
<li>Which districts inhabit “endemic” species?</li>
<li>Which district is the most diverse?
<ul>
<li>Calculate the Shannon index for each district.</li>
<li>For this we need a community matrix. Each Row is a District, Each Column a Species.</li>
<li>Use the <code>diversity()</code> function from the <code>vegan</code> package on the community matrix.</li>
</ul></li>
</ul>
<details>
<summary>
Bonus: Geospatial Data
</summary>
<ul>
<li>Load or install the <code>sf</code> package.</li>
<li>Look at the help page for <code>st_as_sf()</code>.
<ul>
<li>Which arguments do you need?</li>
</ul></li>
<li>Convert the trees from a <code>data.frame</code> to a <code>sf points</code> object. What has changed?</li>
<li>Plot the trees.</li>
</ul>
</details>
</div>
<div id="solution-2" class="section level2 hasAnchor" number="14.2">
<h2><span class="header-section-number">14.2</span> Solution<a href="urban-trees.html#solution-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<details>
<summary>
Click for Answer
</summary>
<div id="district-with-the-most-trees" class="section level3 hasAnchor" number="14.2.1">
<h3><span class="header-section-number">14.2.1</span> District with the most trees<a href="urban-trees.html#district-with-the-most-trees" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="urban-trees.html#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the packages.</span></span>
<span id="cb175-2"><a href="urban-trees.html#cb175-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the datasets.</span></span>
<span id="cb175-3"><a href="urban-trees.html#cb175-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb175-4"><a href="urban-trees.html#cb175-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb175-5"><a href="urban-trees.html#cb175-5" aria-hidden="true" tabindex="-1"></a>trees <span class="ot">=</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/muenster_trees.csv&quot;</span>)</span>
<span id="cb175-6"><a href="urban-trees.html#cb175-6" aria-hidden="true" tabindex="-1"></a>districts <span class="ot">=</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/muenster_districts.csv&quot;</span>)</span>
<span id="cb175-7"><a href="urban-trees.html#cb175-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb175-8"><a href="urban-trees.html#cb175-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(trees)</span></code></pre></div>
<pre><code>##    species  district        X       Y
## 1    Tilia Uppenberg 404685.2 5759126
## 2    Tilia Uppenberg 404698.5 5759130
## 3 Carpinus Uppenberg 404693.0 5759279
## 4 Carpinus Uppenberg 404692.9 5759289
## 5 Carpinus Uppenberg 404692.1 5759319
## 6    Tilia Uppenberg 404685.6 5759520</code></pre>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="urban-trees.html#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(districts)</span></code></pre></div>
<pre><code>##   id   district    district_group       area
## 1 15    Bahnhof  2 Innenstadtring   363089.2
## 2 16  Albachten    5 Münster-West 12965147.7
## 3 17 Angelmodde  8 Münster-Südost  5016879.5
## 4 18      Kreuz  2 Innenstadtring  1014690.9
## 5 19 Berg Fidel 9 Münster-Hiltrup  4781065.8
## 6 20   Düesberg       3 Mitte-Süd  2185161.9</code></pre>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="urban-trees.html#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Which district has the most trees?</span></span>
<span id="cb179-2"><a href="urban-trees.html#cb179-2" aria-hidden="true" tabindex="-1"></a>district_summary <span class="ot">=</span> trees <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(district) <span class="sc">%&gt;%</span> </span>
<span id="cb179-3"><a href="urban-trees.html#cb179-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">ntrees =</span> <span class="fu">length</span>(district))</span>
<span id="cb179-4"><a href="urban-trees.html#cb179-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-5"><a href="urban-trees.html#cb179-5" aria-hidden="true" tabindex="-1"></a>district_summary <span class="sc">%&gt;%</span> <span class="fu">filter</span>(ntrees <span class="sc">==</span> <span class="fu">max</span>(ntrees))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##   district  ntrees
##   &lt;chr&gt;      &lt;int&gt;
## 1 Nienberge   2407</code></pre>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="urban-trees.html#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="co"># or:</span></span>
<span id="cb181-2"><a href="urban-trees.html#cb181-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(trees<span class="sc">$</span>district)</span></code></pre></div>
<pre><code>## 
##       Aaseestadt          Aegidii        Albachten       Amelsbüren       Angelmodde 
##             1729              268             1349             1314              517 
##          Bahnhof       Berg Fidel       Buddenturm           Coerde              Dom 
##              478              495              285              333              569 
##         Düesberg            Geist  Gelmer-Dyckburg       Gievenbeck  Gremmendorf-Ost 
##              495              947              691             2082              728 
## Gremmendorf-West            Hafen          Handorf       Hansaplatz        Herz-Jesu 
##             1125              121              685              344              488 
##    Hiltrup-Mitte      Hiltrup-Ost     Hiltrup-West            Josef   Kinderhaus-Ost 
##              836              450              717              567              942 
##  Kinderhaus-West            Kreuz          Martini    Mauritz-Mitte      Mauritz-Ost 
##             1320             1370              249             1042             1033 
##     Mauritz-West      Mecklenbeck           Neutor        Nienberge      Pluggendorf 
##              561              979              356             2407              447 
##            Roxel        Rumphorst      Schlachthof          Schloss      Schützenhof 
##             1851             1060              921             2030              611 
##          Sentrup          Sprakel       Überwasser        Uppenberg          Wolbeck 
##             2181              716              115              952             1008</code></pre>
</div>
<div id="modelling" class="section level3 hasAnchor" number="14.2.2">
<h3><span class="header-section-number">14.2.2</span> Modelling<a href="urban-trees.html#modelling" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="urban-trees.html#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare the number of trees in a district with its area. </span></span>
<span id="cb183-2"><a href="urban-trees.html#cb183-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-3"><a href="urban-trees.html#cb183-3" aria-hidden="true" tabindex="-1"></a><span class="do">## We need a data.frame with the information from both csv files (area and ntrees)</span></span>
<span id="cb183-4"><a href="urban-trees.html#cb183-4" aria-hidden="true" tabindex="-1"></a><span class="do">## We use a join for that.</span></span>
<span id="cb183-5"><a href="urban-trees.html#cb183-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-6"><a href="urban-trees.html#cb183-6" aria-hidden="true" tabindex="-1"></a>districts <span class="ot">=</span> <span class="fu">left_join</span>(districts, district_summary, <span class="at">by =</span> <span class="st">&quot;district&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="urban-trees.html#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot this relation</span></span>
<span id="cb184-2"><a href="urban-trees.html#cb184-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Is a linear model applicable? -&gt; No</span></span>
<span id="cb184-3"><a href="urban-trees.html#cb184-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ntrees <span class="sc">~</span> area, <span class="at">data =</span> districts)</span></code></pre></div>
<p><img src="ecoanalysis_files/figure-html/unnamed-chunk-70-1.png" width="672" /></p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="urban-trees.html#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Log transformations</span></span>
<span id="cb185-2"><a href="urban-trees.html#cb185-2" aria-hidden="true" tabindex="-1"></a>districts<span class="sc">$</span>area_l10 <span class="ot">=</span> <span class="fu">log10</span>(districts<span class="sc">$</span>area)</span>
<span id="cb185-3"><a href="urban-trees.html#cb185-3" aria-hidden="true" tabindex="-1"></a>districts<span class="sc">$</span>ntrees_l10 <span class="ot">=</span> <span class="fu">log10</span>(districts<span class="sc">$</span>ntrees)</span>
<span id="cb185-4"><a href="urban-trees.html#cb185-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-5"><a href="urban-trees.html#cb185-5" aria-hidden="true" tabindex="-1"></a><span class="co"># After log transformation, a linear model is more feasible</span></span>
<span id="cb185-6"><a href="urban-trees.html#cb185-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-7"><a href="urban-trees.html#cb185-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(districts<span class="sc">$</span>area_l10, districts<span class="sc">$</span>ntrees_l10)</span></code></pre></div>
<p><img src="ecoanalysis_files/figure-html/unnamed-chunk-71-1.png" width="672" /></p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="urban-trees.html#cb186-1" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">=</span> <span class="fu">lm</span>(ntrees_l10 <span class="sc">~</span> area_l10, <span class="at">data =</span> districts)</span>
<span id="cb186-2"><a href="urban-trees.html#cb186-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-3"><a href="urban-trees.html#cb186-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = ntrees_l10 ~ area_l10, data = districts)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -0.66598 -0.11579  0.03334  0.14787  0.51588 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  1.12174    0.36513   3.072  0.00368 ** 
## area_l10     0.27014    0.05668   4.766 2.17e-05 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.2497 on 43 degrees of freedom
## Multiple R-squared:  0.3456, Adjusted R-squared:  0.3304 
## F-statistic: 22.71 on 1 and 43 DF,  p-value: 2.172e-05</code></pre>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="urban-trees.html#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(mod)</span></code></pre></div>
<p><img src="ecoanalysis_files/figure-html/unnamed-chunk-72-1.png" width="672" /><img src="ecoanalysis_files/figure-html/unnamed-chunk-72-2.png" width="672" /><img src="ecoanalysis_files/figure-html/unnamed-chunk-72-3.png" width="672" /><img src="ecoanalysis_files/figure-html/unnamed-chunk-72-4.png" width="672" /></p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="urban-trees.html#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(districts<span class="sc">$</span>area_l10, districts<span class="sc">$</span>ntrees_l10)</span>
<span id="cb189-2"><a href="urban-trees.html#cb189-2" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(mod, <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>)</span></code></pre></div>
<p><img src="ecoanalysis_files/figure-html/unnamed-chunk-73-1.png" width="672" /></p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="urban-trees.html#cb190-1" aria-hidden="true" tabindex="-1"></a>new_area <span class="ot">=</span> <span class="fu">data.frame</span>(<span class="at">area_l10 =</span> <span class="fu">log10</span>(<span class="dv">10000000</span>))</span>
<span id="cb190-2"><a href="urban-trees.html#cb190-2" aria-hidden="true" tabindex="-1"></a>new_area<span class="sc">$</span>ntrees_l10 <span class="ot">=</span> <span class="fu">predict</span>(<span class="at">object =</span> mod, <span class="at">newdata =</span> new_area)</span>
<span id="cb190-3"><a href="urban-trees.html#cb190-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-4"><a href="urban-trees.html#cb190-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(districts<span class="sc">$</span>area_l10, districts<span class="sc">$</span>ntrees_l10)</span>
<span id="cb190-5"><a href="urban-trees.html#cb190-5" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(mod, <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>)</span>
<span id="cb190-6"><a href="urban-trees.html#cb190-6" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(new_area<span class="sc">$</span>area_l10, new_area<span class="sc">$</span>ntrees_l10, <span class="at">col =</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><img src="ecoanalysis_files/figure-html/unnamed-chunk-74-1.png" width="672" /></p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="urban-trees.html#cb191-1" aria-hidden="true" tabindex="-1"></a>new_area<span class="sc">$</span>ntrees_l10</span></code></pre></div>
<pre><code>## [1] 3.012693</code></pre>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="urban-trees.html#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="co"># invert log10</span></span>
<span id="cb193-2"><a href="urban-trees.html#cb193-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb193-3"><a href="urban-trees.html#cb193-3" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span><span class="sc">^</span>new_area<span class="sc">$</span>ntrees_l10</span></code></pre></div>
<pre><code>## [1] 1029.658</code></pre>
</div>
<div id="tree-diversity" class="section level3 hasAnchor" number="14.2.3">
<h3><span class="header-section-number">14.2.3</span> Tree diversity<a href="urban-trees.html#tree-diversity" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="urban-trees.html#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Which districts inhabit &quot;endemic&quot; species?</span></span>
<span id="cb195-2"><a href="urban-trees.html#cb195-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb195-3"><a href="urban-trees.html#cb195-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb195-4"><a href="urban-trees.html#cb195-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Count the unique districts per tree species,</span></span>
<span id="cb195-5"><a href="urban-trees.html#cb195-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Where is this == 1?</span></span>
<span id="cb195-6"><a href="urban-trees.html#cb195-6" aria-hidden="true" tabindex="-1"></a>endemic_species <span class="ot">=</span> trees <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span> </span>
<span id="cb195-7"><a href="urban-trees.html#cb195-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">ndistricts =</span> <span class="fu">length</span>(<span class="fu">unique</span>(district))) <span class="sc">%&gt;%</span> </span>
<span id="cb195-8"><a href="urban-trees.html#cb195-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(ndistricts <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb195-9"><a href="urban-trees.html#cb195-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb195-10"><a href="urban-trees.html#cb195-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb195-11"><a href="urban-trees.html#cb195-11" aria-hidden="true" tabindex="-1"></a>trees <span class="sc">%&gt;%</span> <span class="fu">filter</span>(species <span class="sc">%in%</span> endemic_species<span class="sc">$</span>species) <span class="sc">%&gt;%</span> </span>
<span id="cb195-12"><a href="urban-trees.html#cb195-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pull</span>(district) <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span></code></pre></div>
<pre><code>## [1] &quot;Geist&quot;        &quot;Mecklenbeck&quot;  &quot;Gievenbeck&quot;   &quot;Kreuz&quot;        &quot;Bahnhof&quot;     
## [6] &quot;Mauritz-West&quot; &quot;Schloss&quot;      &quot;Aaseestadt&quot;</code></pre>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="urban-trees.html#cb197-1" aria-hidden="true" tabindex="-1"></a>trees <span class="sc">%&gt;%</span> <span class="fu">filter</span>(species <span class="sc">%in%</span> endemic_species<span class="sc">$</span>species)</span></code></pre></div>
<pre><code>##           species     district        X       Y
## 1     Cladrastris        Geist 404869.2 5754909
## 2        Catalpha  Mecklenbeck 403531.2 5754678
## 3        Catalpha  Mecklenbeck 403521.3 5754677
## 4        Catalpha  Mecklenbeck 403541.1 5754679
## 5        Catalpha  Mecklenbeck 403556.1 5754681
## 6        Mespilus   Gievenbeck 401353.9 5758733
## 7  Sequoiadendron        Kreuz 405850.2 5758408
## 8     Cryptomeria      Bahnhof 405953.9 5757263
## 9         Davidia        Kreuz 405724.5 5758508
## 10       Sambucus Mauritz-West 406870.7 5757471
## 11      Decaisnea      Schloss 404395.1 5758201
## 12    Pseudotsuga      Schloss 404655.8 5757664
## 13       Viburnum   Aaseestadt 403632.5 5755626
## 14          Abies   Aaseestadt 404304.0 5756153</code></pre>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="urban-trees.html#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Shannon Index</span></span>
<span id="cb199-2"><a href="urban-trees.html#cb199-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-3"><a href="urban-trees.html#cb199-3" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(&quot;vegan&quot;)</span></span>
<span id="cb199-4"><a href="urban-trees.html#cb199-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(vegan)</span>
<span id="cb199-5"><a href="urban-trees.html#cb199-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-6"><a href="urban-trees.html#cb199-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Community Matrix</span></span>
<span id="cb199-7"><a href="urban-trees.html#cb199-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Rows: districts</span></span>
<span id="cb199-8"><a href="urban-trees.html#cb199-8" aria-hidden="true" tabindex="-1"></a><span class="do">## Columns: species</span></span>
<span id="cb199-9"><a href="urban-trees.html#cb199-9" aria-hidden="true" tabindex="-1"></a>cont <span class="ot">=</span> <span class="fu">table</span>(trees<span class="sc">$</span>district, trees<span class="sc">$</span>species)</span>
<span id="cb199-10"><a href="urban-trees.html#cb199-10" aria-hidden="true" tabindex="-1"></a>vegan<span class="sc">::</span><span class="fu">diversity</span>(cont)</span></code></pre></div>
<pre><code>##       Aaseestadt          Aegidii        Albachten       Amelsbüren       Angelmodde 
##         2.694738         1.900178         1.521810         1.319029         2.103345 
##          Bahnhof       Berg Fidel       Buddenturm           Coerde              Dom 
##         2.198826         1.842371         1.497039         1.913592         1.329042 
##         Düesberg            Geist  Gelmer-Dyckburg       Gievenbeck  Gremmendorf-Ost 
##         2.266915         2.225178         1.554180         2.128873         2.126013 
## Gremmendorf-West            Hafen          Handorf       Hansaplatz        Herz-Jesu 
##         1.708149         1.780047         2.170564         2.469955         2.235766 
##    Hiltrup-Mitte      Hiltrup-Ost     Hiltrup-West            Josef   Kinderhaus-Ost 
##         2.335542         2.327677         1.495869         2.348574         2.077545 
##  Kinderhaus-West            Kreuz          Martini    Mauritz-Mitte      Mauritz-Ost 
##         2.177658         2.519458         1.692007         2.207160         2.497341 
##     Mauritz-West      Mecklenbeck           Neutor        Nienberge      Pluggendorf 
##         2.479100         2.253076         1.969991         2.132541         2.758211 
##            Roxel        Rumphorst      Schlachthof          Schloss      Schützenhof 
##         1.522840         2.161561         2.609566         2.401460         2.516116 
##          Sentrup          Sprakel       Überwasser        Uppenberg          Wolbeck 
##         2.310912         1.942009         2.468009         2.247333         1.520262</code></pre>
</details>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="species-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="advanced-visualizations.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/13-trees.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["ecoanalysis.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
