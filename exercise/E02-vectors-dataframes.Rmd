---
code-fold: true
code-summary: "Solution"
eval: false
---


# E02: Vektoren, Dataframes

Der folgende Vektor enthält Temperaturdaten vom Aasee in Münster vom 2021-06-02.

- Wie viele Einträge hat der Vektor?
- Teste die Funktionen `range`, `summary` und `boxplot` mit dem Vektor.
- Konvertiere die Werte von Celsius nach Fahrenheit.
- Sowohl `sort` als auch `order` sortieren den Vektor. Was ist der Unterschied zwischen beiden Funktionen?


```{r}
#| code-fold: false
temperature <- c(18.81,18.73,18.92,18.87,18.76,18.79,18.87,18.84,18.89,18.89,
                 18.93,18.95,18.92,18.97,19.00,18.99,19.00,19.00,18.99,19.00,
                 18.98,18.97,18.97,18.97,18.97,18.98,18.96,18.94,18.94,18.91,
                 18.90,18.89,18.87,18.85,18.85,18.84,18.83,18.81,18.81,18.81,
                 18.81,18.81,18.80,18.79,18.80,18.79,18.79,18.78,18.77,18.78,
                 18.79,18.79,18.79,18.79,18.79,18.79,18.80,18.79,18.81,18.80,
                 18.81,18.81,18.82,18.84,18.87,18.89,18.89,18.91,18.96,19.02,
                 19.11,19.15,18.95,18.92,18.84,18.85,18.96,18.92,18.95,18.95,
                 18.91,19.00,19.02,19.06,19.05,19.47,19.32,19.05,19.66,19.57,
                 19.23,19.42,19.36,19.66,19.79,19.81,19.99,21.10,21.94,22.52,
                 22.81,22.43,22.16,21.55,21.80,21.02,21.85,21.45,22.48,22.73,
                 22.61,22.83,20.85,20.68,19.76,19.81,19.74,19.58,19.35,19.40,
                 19.75,19.76,19.85,19.82,19.86,20.08,20.06,19.85,20.04,19.90,
                 19.96,20.12,19.94,20.20,20.17,20.31,20.17,20.37,20.36,20.13)
```


```{r}
length(temperature)
range(temperature)
summary(temperature)
boxplot(temperature)


# Celsius zu Fahrenheit: 
fahrenheit = (temperature * 9/5) + 32
fahrenheit

sort(temperature) # gibt die Werte sortiert zurueck
order(temperature) # gibt den Index der Werte sortiert zurueck

```


## Indexing und Logische Operatoren

- Gib den 5ten Wert des Vektors aus.
- Gib nur den letzten Wert des Vektors aus.
- Speichere die ersten 20 Temperaturen in einer neuen Variablen.
- Speichere die 30 niedrigsten Temperaturen in einer neuen Variablen.

```{r}
temperature[5]
temperature[length(temperature)]

temp_first_20 = temperature[seq(1,20)]
temp_low_30 = sort(temperature)[1:30]
```

- Gib alle Temperaturen aus die 22°C überschreiten.
- Wie oft wurde genau 18.79°C gemessen?

```{r}
temperature[temperature > 22]

sum(temperature == 18.79)
#oder
length(temperature[temperature == 18.79])
```


## Dataframes

Zum Testen von Funktionen und zur Übung stellt R verschiedene Datensätze zur Verfügung. Der wohl bekannteste Datensatz davon ist `iris` er kann folgendermaßen geladen werden:


```{r}
data(iris)
head(iris)
```

* Teste folgende Funktionen mit dem Iris Datensatz: `length()`, `nrow()`, `ncol()`, `summary()`, `colnames()`.
* Speichere die Species Spalte in einer neuen Variablen. Um was für ein R Objekt handelt es sich nun?
* Wie viele Species sind im Datensatz enthalten und wie oft kommt jede Species vor?


```{r}

length(iris)
nrow(iris)
ncol(iris)
summary(iris)
summary(iris$Sepal.Length)
colnames(iris); names(iris)
```



## Dataframe subsetting

* Erstelle einen neuen dataframe der nur die Beobachtungen der Species "virginica" enthält.
* Erstelle einen neuen dataframe der nur die Beobachtungen der Species "setosa" und "versicolor" enthält.
* Erstelle einen neuen dataframe der extakt die erste Hälfte der Beobachtungen enthält.
* Erstelle einen neuen dataframe der nur Beobachtungen enthält mit einer Sepal.Length zwischen 5.5 und 7.


```{r}
vir = iris[iris$Species == "virginica",]
set_ver = iris[iris$Species == "setosa" | iris$Species == "versicolor",]
# oder
set_ver = iris[iris$Species != "virginica",]
# oder
set_ver = iris[iris$Species %in% c("setosa", "versicolor"),]


iris_half = iris[1:(nrow(iris)/2),]

iris_sepal = iris[iris$Sepal.Length > 5.5 & iris$Sepal.Length < 7,]

```




## Bonus: Ein bisschen Statistik

* Was ist die durchschnittliche Sepal.Length von "virginica"?
* Zeichne ein Histogramm der Sepal.Width.
* Berechne die Varianz und Standardabweichung der Sepal.Width.
* Zeichne einen Scatterplot mit der Sepal.Length auf der x-Achse und der Petal.Length auf der y-Achse.


```{r}
mean(vir$Sepal.Length)
hist(iris$Sepal.Width)

var(iris$Sepal.Width)
sd(iris$Sepal.Width)
plot(iris$Sepal.Length, iris$Petal.Length)
```




***

**Tipp 1:** Data.frames können als 2-Dimensionale Vektoren aufgefasst werden. Subsetting von data.frames benötigen deshalb 2 Werte, einen für die Reihe, einen für die Spalte.


```{r}
#| code-fold: false
# row 1, column 2
iris[1,2]

# the first row, empty means "everything"
iris[1,]

# the first 3 rows, column 3 and 4
iris[seq(3), c(3,4)]
```


**Tipp 2:** Einzele Spalten können mit `$` angewählt werden.

```{r}
#| code-fold: false
iris$Sepal.Length
```


**Tipp 3:** Googlen!




